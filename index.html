<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNIM & DABNM Prep App</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-6">UWorld-Style CNIM & DABNM Exam Prep</h1>
        <div id="home" class="space-y-6">
            <h2 class="text-2xl font-semibold mb-4">Select Exam</h2>
            <button onclick="selectExam('CNIM')" class="bg-blue-500 text-white px-4 py-2 rounded">CNIM</button>
            <button onclick="selectExam('DABNM')" class="bg-blue-500 text-white px-4 py-2 rounded">DABNM</button>
        </div>
        <div id="quizSetup" class="space-y-6 hidden">
            <h2 class="text-2xl font-semibold mb-4">Customize Quiz</h2>
            <div id="topics"><p>Topics coming soon. Using all for now.</p></div>
            <input id="numQuestions" type="number" value="5" class="border p-2">
            <button onclick="generateQuiz()" class="bg-green-500 text-white px-4 py-2 rounded">Start Quiz</button>
        </div>
        <div id="quiz" class="space-y-6 hidden">
            <div id="quizContent"></div>
            <button id="submitQuiz" onclick="submitQuiz()" class="bg-blue-500 text-white px-4 py-2 rounded hidden">Submit</button>
        </div>
    </div>

    <script>
        // Full hard-coded questions from your json (for local testing â€“ ~50 questions)
        const allQuestions = [
          {
            "exam": "DABNM",
            "id": 1,
            "topic": "Basic Neuroscience",
            "question": "Ependymal cells primarily line?",
            "options": ["Blood vessels", "Ventricles", "Synapses", "Axons"],
            "correct": "B",
            "explanation": "Ependymal cells line the ventricles and central canal, aiding in CSF circulation."
          },
          {
            "exam": "DABNM",
            "id": 2,
            "topic": "Basic Neuroscience",
            "question": "Refractory period ensures?",
            "options": ["Bidirectional propagation", "Unidirectional impulse", "Synaptic delay", "Glial activation"],
            "correct": "B",
            "explanation": "The refractory period prevents backward propagation, ensuring unidirectional impulse travel."
          },
          {
            "exam": "DABNM",
            "id": 3,
            "topic": "Basic Neuroscience",
            "question": "Insula cortex involved in?",
            "options": ["Taste/viscera", "Motor control", "Vision", "Hearing"],
            "correct": "A",
            "explanation": "The insula is involved in gustation and visceral sensation."
          },
          {
            "exam": "DABNM",
            "id": 4,
            "topic": "Basic Neuroscience",
            "question": "Chromatolysis post-injury affects?",
            "options": ["Axon", "Nucleus in soma", "Dendrites", "Myelin"],
            "correct": "B",
            "explanation": "Chromatolysis is the dispersion of Nissl bodies in the soma after axonal injury."
          },
          {
            "exam": "DABNM",
            "id": 5,
            "topic": "Basic Neuroscience",
            "question": "Multiple sclerosis pathology?",
            "options": ["Axonal transection", "Demyelination", "Neuronal death", "Glial overgrowth"],
            "correct": "B",
            "explanation": "MS is characterized by demyelination of axons in the CNS."
          },
          {
            "exam": "DABNM",
            "id": 6,
            "topic": "Basic Neuroscience",
            "question": "Pons contains tracts for?",
            "options": ["Cranial nerves V-VIII", "Limbic emotions", "Thalamic relay", "Cortical association"],
            "correct": "A",
            "explanation": "The pons houses nuclei for cranial nerves V-VIII."
          },
          {
            "exam": "DABNM",
            "id": 7,
            "topic": "Basic Neuroscience",
            "question": "Hebbian theory states?",
            "options": ["Cells that fire together wire together", "Isolation strengthens synapses", "Stress prunes connections", "Rest rebuilds neurons"],
            "correct": "A",
            "explanation": "Hebb's rule describes synaptic strengthening through co-activation."
          },
          {
            "exam": "DABNM",
            "id": 8,
            "topic": "Basic Neuroscience",
            "question": "The ascending fibers of the cuneate nucleus and gracilis nucleus cross over in the medulla to form what structure?",
            "options": ["Internal capsule", "Lateral lemniscus", "Medial lemniscus", "Superior colliculus"],
            "correct": "C",
            "explanation": "The medial lemniscus is formed by decussating fibers from gracilis and cuneate nuclei."
          },
          {
            "exam": "DABNM",
            "id": 9,
            "topic": "Basic Neuroscience",
            "question": "What is the primary function of the basal ganglia?",
            "options": ["Sensory processing", "Motor control and learning", "Memory storage", "Visual perception"],
            "correct": "B",
            "explanation": "Basal ganglia are key for motor control, habit formation, and reward."
          },
          {
            "exam": "DABNM",
            "id": 10,
            "topic": "Basic Neuroscience",
            "question": "Which structure connects the two cerebral hemispheres?",
            "options": ["Thalamus", "Corpus callosum", "Hypothalamus", "Amygdala"],
            "correct": "B",
            "explanation": "The corpus callosum is the major commissure connecting hemispheres."
          },
          {
            "exam": "DABNM",
            "id": 11,
            "topic": "Basic Neuroscience",
            "question": "The myelin sheath is produced by which cells in the CNS?",
            "options": ["Astrocytes", "Oligodendrocytes", "Microglia", "Schwann cells"],
            "correct": "B",
            "explanation": "Oligodendrocytes myelinate axons in the CNS; Schwann in PNS."
          },
          {
            "exam": "DABNM",
            "id": 12,
            "topic": "Basic Neuroscience",
            "question": "What is the resting membrane potential of a typical neuron?",
            "options": ["-70 mV", "+40 mV", "-90 mV", "0 mV"],
            "correct": "A",
            "explanation": "Typical resting potential is -70 mV due to ion gradients
